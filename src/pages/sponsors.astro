---
import Layout from "../layouts/Layout.astro";
import {Image} from "astro:assets";
import {sponsors} from "../constants.ts";
import {Tier} from "../types.ts";
import OutlineButton from "../components/OutlineButton.astro";

// Group sponsors by tier
const sponsorsByTier = sponsors.reduce((acc, sponsor) => {
    if (!acc[sponsor.tier]) {
        acc[sponsor.tier] = [];
    }
    acc[sponsor.tier].push(sponsor);
    return acc;
}, {} as Record<string, (typeof sponsors)[number][]>);

// Define tier order
const tierOrder = [Tier.Diamond, Tier.Gold, Tier.Silver, Tier.Bronze];

// Tier display configuration (hardcoded)
const tierConfig: Record<string, {displayName: string; gridClass: string; logoHeight: number}> = {
    [Tier.Diamond]: {
        displayName: "Diamond",
        gridClass: "diamond",
        logoHeight: 120
    },
    [Tier.Gold]: {
        displayName: "Gold",
        gridClass: "gold",
        logoHeight: 100
    },
    [Tier.Silver]: {
        displayName: "Silver",
        gridClass: "silver",
        logoHeight: 100
    },
    [Tier.Bronze]: {
        displayName: "Bronze",
        gridClass: "bronze",
        logoHeight: 80
    }
};
---

<Layout title="Sponsors">
    <main class="main-content">
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Our Sponsors</h1>
                <p class="hero-subtitle">Partners in innovation and education</p>
                <p class="hero-description">
                    We are grateful to our sponsors who make our robotics journey possible.
                    Their support enables us to compete, learn, and inspire the next generation
                    of STEM leaders in our community.
                </p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="section-title text-center">Become a Sponsor</h2>
                        <div class="sponsorship-info">
                            <p class="text-center text-lg">
                                Join our mission to inspire the next generation of STEM leaders.
                                Your sponsorship helps us compete, learn, and give back to our community.
                            </p>

                            <div class="sponsorship-benefits">
                                <h3>Sponsorship Benefits</h3>
                                <div class="benefits-grid">
                                    <div class="benefit-item">
                                        <h4>Brand Visibility</h4>
                                        <p>Logo placement on robot, team shirts, and promotional materials</p>
                                    </div>
                                    <div class="benefit-item">
                                        <h4>Community Impact</h4>
                                        <p>Support STEM education and inspire young minds in your community</p>
                                    </div>
                                    <div class="benefit-item">
                                        <h4>Networking</h4>
                                        <p>Connect with other sponsors and the FIRST® robotics community</p>
                                    </div>
                                    <div class="benefit-item">
                                        <h4>Recognition</h4>
                                        <p>Featured on our website, social media, and at competitions</p>
                                    </div>
                                </div>
                            </div>

                            <div class="sponsorship-tiers">
                                <h3>Sponsorship Levels</h3>
                                <div class="tiers-grid">
                                    <div class="tier-card">
                                        <h4>Diamond - $1000+</h4>
                                        <ul>
                                            <li>Name on website and portfolio</li>
                                            <li>Name on merch</li>
                                            <li>Name on banner and shoutout at events</li>
                                            <li>Outreach events with company</li>
                                            <li>Mentioned in Social Media</li>
                                            <li>Brand addition on off-season projects</li>
                                        </ul>
                                    </div>
                                    <div class="tier-card">
                                        <h4>Gold - $500+</h4>
                                        <ul>
                                            <li>Name on website and portfolio</li>
                                            <li>Name on merch</li>
                                            <li>Name on banner and shoutout at events</li>
                                            <li>Mentioned in Social Media</li>
                                        </ul>
                                    </div>
                                    <div class="tier-card">
                                        <h4>Silver - $250+</h4>
                                        <ul>
                                            <li>Name on website and portfolio</li>
                                            <li>Name on merch</li>
                                        </ul>
                                    </div>
                                    <div class="tier-card">
                                        <h4>Bronze - $100+</h4>
                                        <ul>
                                            <li>Name on website and portfolio</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center mt-4">
                                <OutlineButton href="/contact" class="btn-lg px-4 py-2">Become a Sponsor</OutlineButton>
                                <p class="mt-2 mb-0">Contact us to discuss sponsorship opportunities</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h2 class="section-title text-center">Thank You to Our Sponsors</h2>

                        {tierOrder.map(tier => sponsorsByTier[tier] && sponsorsByTier[tier].length > 0 && (
                            <div class="sponsor-tier">
                                <h3 class="tier-title">{tierConfig[tier].displayName} Sponsors</h3>
                                <div class={`sponsor-grid ${tierConfig[tier].gridClass}`}>
                                    {sponsorsByTier[tier].map(sponsor => (
                                        <div class="sponsor-card">
                                            <div class="sponsor-logo-image">
                                                <Image src={sponsor.logo} alt={`${sponsor.name} Logo`} 
                                                       height={tierConfig[tier].logoHeight} 
                                                       loading="eager" format="avif"/>
                                            </div>
                                            <h4>{sponsor.name}</h4>
                                            <p>{sponsor.description}</p>
                                            <a href={sponsor.url} target="_blank" rel="noopener noreferrer"
                                               class="sponsor-link">Visit Website</a>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </section>
    </main>
</Layout>

<style>
    .sponsor-tier {
        margin-bottom: 3rem;
    }

    .tier-title {
        text-align: center;
        font-size: 1.8rem;
        margin-bottom: 2rem;
        color: var(--light-red);
    }

    .sponsor-grid {
        display: grid;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .sponsor-grid.diamond {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        margin: 0 auto 2rem;
    }

    .sponsor-grid.gold {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .sponsor-grid.silver {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    .sponsor-grid.bronze {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }

    .sponsor-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
        transition: transform 0.3s ease;
    }

    .sponsor-card:hover {
        transform: translateY(-5px);
    }

    .sponsor-logo {
        width: 120px;
        height: 120px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        color: rgba(255, 255, 255, 0.6);
        font-weight: bold;
    }

    .sponsor-logo-image {
        width: 120px;
        height: 120px;
        background: rgba(255, 255, 255, 1);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        padding: 1rem;
        overflow: hidden;
    }

    .sponsor-logo-image img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 4px;
    }

    .sponsor-card h4 {
        color: var(--light-red);
        margin-bottom: 1rem;
        font-size: 1.3rem;
    }

    .sponsor-card p {
        margin-bottom: 1.5rem;
        color: rgba(255, 255, 255, 0.8);
    }

    .sponsor-link {
        color: var(--light-red);
        text-decoration: none;
        font-weight: 600;
        border: 1px solid var(--light-red);
        padding: 0.5rem 1rem;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .sponsor-link:hover {
        background: var(--light-red);
        color: white;
    }

    .sponsorship-info {
        max-width: 800px;
        margin: 0 auto;
    }

    .sponsorship-benefits {
        margin: 2rem 0;
    }

    .sponsorship-benefits h3 {
        text-align: center;
        color: var(--light-red);
        margin-bottom: 2rem;
        font-size: 1.5rem;
    }

    .benefits-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .benefit-item {
        text-align: center;
    }

    .benefit-item h4 {
        color: var(--light-red);
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .sponsorship-tiers h3 {
        text-align: center;
        color: var(--light-red);
        margin-bottom: 2rem;
        font-size: 1.5rem;
    }

    .tiers-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .tier-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .tier-card h4 {
        color: var(--light-red);
        margin-bottom: 1.5rem;
        font-size: 1.2rem;
        text-align: center;
    }

    .tier-card ul {
        list-style: none;
        padding: 0;
    }

    .tier-card li {
        padding: 0.5rem 0;
        padding-left: 1.5rem;
        position: relative;
    }

    .tier-card li::before {
        content: "✓";
        position: absolute;
        left: 0;
        color: var(--light-red);
        font-weight: bold;
    }

    .btn-lg {
        padding: 1rem 2rem;
        font-size: 1.2rem;
    }
</style>